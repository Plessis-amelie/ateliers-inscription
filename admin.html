
<!DOCTYPE html>
<html lang='fr'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>Administration - Export des inscriptions</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background-color: #f9f9f9; }
        h1 { color: #333; text-align: center; }
        .container { max-width: 500px; margin: auto; background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        input[type=password] { width: 100%; padding: 10px; margin-top: 10px; border: 1px solid #ccc; border-radius: 5px; }
        button { padding: 10px 15px; margin-top: 15px; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; }
        .validate-btn { background-color: #0078D7; color: white; }
        .export-btn { background-color: #28a745; color: white; }
        .back-btn { background-color: #6c757d; color: white; margin-left: 10px; }
        .hidden { display: none; }
    </style>
</head>
<body>
    <h1>Panneau d'administration</h1>
    <div class='container' id='auth'>
        <p>Veuillez entrer le mot de passe :</p>
        <input type='password' id='password' placeholder='Mot de passe'>
        <button class='validate-btn' onclick='checkPassword()'>Valider</button>
        <p id='error' style='color:red;'></p>
    </div>

    <div class='container hidden' id='adminPanel'>
        <h2>Bienvenue dans le panneau d'administration</h2>
        <button class='export-btn' onclick='exportCSV()'>Exporter les inscriptions en CSV</button>
        <button class='back-btn' onclick='goBack()'>Retour au formulaire</button>
    </div>

    <script>
        const correctPassword = 'prof2025'; // Mot de passe à modifier si besoin

        function checkPassword() {
            const input = document.getElementById('password').value;
            if (input === correctPassword) {
                alert('Mot de passe correct. Accès autorisé.');
                document.getElementById('auth').style.display = 'none';
                document.getElementById('adminPanel').classList.remove('hidden');
            } else {
                document.getElementById('error').textContent = 'Mot de passe incorrect';
            }
        }

        function exportCSV() {
            let inscriptions = JSON.parse(localStorage.getItem('inscriptions')) || { 'Atelier 1': [], 'Atelier 2': [], 'Atelier 3': [] };
            let csvContent = 'data:text/csv;charset=utf-8,Nom;Classe;Atelier
';
            for (let atelier in inscriptions) {
                inscriptions[atelier].forEach(entry => {
                    csvContent += `${entry.nom};${entry.classe};${atelier}
`;
                });
            }
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement('a');
            link.setAttribute('href', encodedUri);
            link.setAttribute('download', 'inscriptions.csv');
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function goBack() {
            window.location.href = 'formulaire_ateliers_secure.html'; // Change si le fichier a un autre nom
        }
    </script>
</body>
</html>
