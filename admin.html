
<!DOCTYPE html>
<html lang='fr'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>Administration - Export des inscriptions</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h1 { color: #333; }
        button { padding: 10px; background-color: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; }
        .hidden { display: none; }
    </style>
</head>
<body>
    <h1>Page d'administration</h1>
    <div id='auth'>
        <p>Veuillez entrer le mot de passe :</p>
        <input type='password' id='password'>
        <button onclick='checkPassword()'>Valider</button>
        <p id='error' style='color:red;'></p>
    </div>

    <div id='adminPanel' class='hidden'>
        <button onclick='exportCSV()'>Exporter les inscriptions en CSV</button>
    </div>

    <script>
        const correctPassword = 'prof2025'; // Mot de passe Ã  modifier si besoin

        function checkPassword() {
            const input = document.getElementById('password').value;
            if (input === correctPassword) {
                document.getElementById('auth').style.display = 'none';
                document.getElementById('adminPanel').classList.remove('hidden');
            } else {
                document.getElementById('error').textContent = 'Mot de passe incorrect';
            }
        }

        function exportCSV() {
            let inscriptions = JSON.parse(localStorage.getItem('inscriptions')) || { 'Atelier 1': [], 'Atelier 2': [], 'Atelier 3': [] };
            let csvContent = 'data:text/csv;charset=utf-8,Nom;Classe;Atelier
';
            for (let atelier in inscriptions) {
                inscriptions[atelier].forEach(entry => {
                    csvContent += `${entry.nom};${entry.classe};${atelier}
`;
                });
            }
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement('a');
            link.setAttribute('href', encodedUri);
            link.setAttribute('download', 'inscriptions.csv');
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    </script>
</body>
</html>
